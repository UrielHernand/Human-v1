image: node:15

stages:
  - preparacion
  - test
  - deploy
 
jobs:  
  preparacion:
    stage: preparacion
    script:
      - npm install
      - npm run build
    artifacts:
      paths:
        - node_modules
        - build

  test:
    stage: test
    script:
      - npm install
      - npm run test

  deploy:
    stage: deploy
    script:
      - npm install
      - npm run build
      - mv dist public
    artifacts:
      paths:
        - public
    only:
      - master

